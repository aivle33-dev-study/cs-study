# Ch13. 교착 상태

&nbsp;
## 13-1. 교착 상태란
    ☑️ keywords : 교착 상태, 식사하는 철학자 문제, 자원 할당 그래프, 교착 상태 발생 조건
<br>

- 교착 상태 (deadlock)
    
    일어나지 않을 사건을 기다리며 진행이 멈춰버리는 현상
<br>

### ● 자원 할당 그래프

1. 프로세스는 원, 자원의 종류는 사각형으로 표현

2. 사용할 수 있는 자원의 개수는 자원 사각형 내에 점으로 표현

3. 프로세스가 어떤 자원을 할당 받아 사용 중이라면, 자원에서 프로세스를 향해 화살표 표시

4. 프로세스가 어떤 자원을 기다리고 있다면, 프로세스에서 자원으로 화살표를 표시
    
    ![IMG_9FECCEC86A97-1](https://github.com/aivle33-dev-study/cs-study/assets/90406411/7be5a8a1-058f-4eeb-b8fb-381dced38f7e)
    <br>
    
- 교착상태가 발생한 상황은 자원 할당 그래프가 원의 형태임
    
    But, 원의 형태를 띈다고 반드시 교착상태가 발생하는 것은 아님
    
    ![IMG_2F6CBF09C3C7-1](https://github.com/aivle33-dev-study/cs-study/assets/90406411/58c81282-5ffe-420d-bec3-4b938bb5c9dd)
    <br>

### ● 교착 상태 발생 조건

아래의 4가지 조건 모두 만족시 **교착 상태** 발생

1. 상호 배제(mutual exclusion) : 한 프로세스가 사용하는 자원을 다른 프로세스가 사용할 수 없는 상태

2. 점유와 대기(hold and wait) : 자원을 할당 받은 상태에서, 다른 자원을 기다리고 있는 상태

3. 비선점(nonpreemptive) : 어떤 프로세스도 다른 프로세스의 자원을 강제로 빼앗지 못하는 상태

4. 원형 대기(circular wait) : 프로세스들이 원의 형태로 자원을 대기하는 상태

&nbsp;
## 13-2. **교착 상태 해결 방법**

    ☑️ keywords : 교착 상태 예방, 교착 상태 회피, 교착 상태 검출 후 회복
<br>

### ● 교착 상태 예방

- 교착 상태 예방 방법 : 교착 상태 발생 조건 4가지 중 하나를 없앰

- 상호 배제 없애기
    - 모든 자원을 공유 가능하게 만든다는 의미
        
        → 현실적으로 불가능
        
- 점유와 대기 없애기
    - 운영체제는 특정 프로세스에 자원을 모두 할당하거나, 아예 할당하지 않는 방식으로 배분
        
        → 당장 자원이 필요해도 기다릴 수 밖에 없는 프로세스, 사용되지 않으면서 오랫동안 할당되는 자원을 다수 양산
        
        → 자원의 활용률이 낮아져 많은 자원을 활용하는 프로세스가 불리함
        
        → 기아 현상
        
- 비선점 조건 없애기
    
    - 자원을 이용 중인 프로세스로부터 해당 자원을 빼앗을 수 있음
    
    - 선점하여 사용할 수 있는 일부 자원에 대해서는 효과적임
    
    - But, 모든 자원이 선점 가능하지는 않으므로 범용성이 떨어짐
    
- 원형 대기 조건 없애기
    
    - 자원에 번호를 붙이고 오름차순으로 자원을 할당
    
    - 앞선 세가지 방법보다 현실적이고 실용적임
    
    - But, 번호 붙이는 작업이 어려움 & 번호에 따라 활용률이 달라짐
    <br>

### ● 교착 상태 회피

- 교착 상태 회피: 교착 상태를 무분별한 자원 할당으로 인해 발생했다고 간주하고, 자원을 조금씩 할당함
    
    - 안전 상태에서 안전 상태로 움직이는 경우에만 자원을 할당하는 방식
    
    - 안전 상태 : 교착 상태 없이 모든 프로세스가 자원을 할당받고 종료될 수 있는 상태
    
    - 불안전 상태 : 교착 상태가 발생할 수도 있는 상태
    
    - 안전 순서열 : 교착 상태 없이 안전하게 프로세스들에 자원을 할당할 수 있는 순서
    <br>

### ● 교착 상태 검출 후 회복

- 교착 상태 검출 후 회복 : 프로세스가 자원을 요구하면 일단 할당, 교착 상태가 검출되면 회복하는 방식
    
    - 선점을 통한 회복 : 교착 상태가 해결될 때 까지 한 프로세스씩 자원을 몰아주는 방식
    
    - 프로세스 강제 종료를 통한 회복

        - 교착 상태에 놓인 프로세스를 모두 강제 종료 → 작업 내역을 잃을 위험
        
        - 교착 상태가 해결될 때까지 한 프로세스씩 강제 종료 → 오버헤드


- 교착 상태 무시

    - 타조 알고리즘 : 드물게 발생하는 잠재적 문제를 무시로 대처하는 방식
